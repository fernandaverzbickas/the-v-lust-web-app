{"ast":null,"code":"import _Object$entries from \"@babel/runtime-corejs2/core-js/object/entries\";\nvar _jsxFileName = \"C:\\\\Users\\\\fverz\\\\Documents\\\\myProjects\\\\vlust-hosting\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\n\nrequire('intersection-observer');\n\nimport './style.css';\nimport Layout from '../src/components/Layout/Layout';\nimport fetch from 'isomorphic-fetch';\nimport Link from 'next/link';\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport Spinner from '../src/components/UI/Spinner/Spinner';\nconst Look = React.lazy(() => import('../src/components/Looks/Look'));\n\nconst Home = () => {\n  const {\n    0: json,\n    1: setJson\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: outputed,\n    1: setOutputed\n  } = useState([]);\n  const {\n    0: hasMore,\n    1: setHasMore\n  } = useState(true);\n  const {\n    0: limit,\n    1: setLimit\n  } = useState(6);\n  useEffect(() => {\n    const fetchData = () => {\n      fetch('https://the-v-lust.firebaseio.com/looks.json').then(response => {\n        return response.json();\n      }).then(data => {\n        if (data === null) {\n          setLoading(false);\n        }\n\n        if (data) {\n          let dataJson = _Object$entries(data);\n\n          let shuffled = dataJson.map(a => ({\n            sort: Math.random(),\n            value: a\n          })).sort((a, b) => a.sort - b.sort).map(a => a.value);\n          let storesInfo = [];\n\n          if (shuffled.length !== 0 || shuffled !== null) {\n            for (let i = 0; i < shuffled.length; i++) {\n              storesInfo.push([shuffled[i][0], shuffled[i][1].name, shuffled[i][1].email, shuffled[i][1].url, shuffled[i][1].imageUrl]);\n            }\n          }\n\n          setJson(storesInfo);\n          outputData(storesInfo);\n          setLoading(false);\n        }\n      }).catch(err => {\n        console.log(err);\n        setLoading(false);\n      });\n    };\n\n    fetchData();\n  }, []);\n  let data = [];\n\n  const outputData = storesInfo => {\n    if (storesInfo.length > 0) {\n      if (outputed.length === 0) {\n        data = storesInfo.slice(0, limit);\n        setOutputed(data);\n\n        if (data.length >= storesInfo.length) {\n          setHasMore(false);\n        }\n      }\n    }\n  };\n\n  const fetchData = () => {\n    let oldLimit = limit;\n    let partialArr = json.slice(oldLimit, limit + 3);\n    setOutputed(outputed.concat(partialArr));\n    setLimit(limit + 3);\n\n    if (json.length <= outputed.length + partialArr.length) {\n      setHasMore(false);\n    }\n  };\n\n  console.log('hasMOre?:', hasMore);\n\n  let looks = __jsx(Spinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  });\n\n  if (loading === false && json.length === 0) {\n    looks = __jsx(\"div\", {\n      style: {\n        position: \"relative\",\n        verticalAlign: \"middle\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, __jsx(\"p\", {\n      style: {\n        textAlign: \"center\",\n        width: '100%',\n        marginTop: \"30%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"NO LOOKS SUBMITTED YET! CHECK LATER OR \"), __jsx(Link, {\n      href: \"/submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      style: {\n        cursor: 'pointer',\n        textDecoration: 'underline',\n        textAlign: 'center',\n        display: 'block'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"SUBMIT YOUR LOOK!\")));\n  }\n\n  if (json.length > 0) {\n    looks = __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, __jsx(InfiniteScroll, {\n      dataLength: outputed.length,\n      next: fetchData,\n      hasMore: hasMore,\n      loader: __jsx(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }),\n      endMessage: __jsx(\"p\", {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, __jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"YOU HAVE SEEN IT ALL! \", __jsx(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), \" IT'S TIME TO CHOOSE!\")),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"Looks\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, outputed.map(look => {\n      return __jsx(Look, {\n        key: look[0],\n        id: look[0],\n        name: look[1],\n        email: look[2],\n        url: look[3],\n        image: look[4],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      });\n    }))));\n  }\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    className: \"intro\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, \"VOTE FOR YOUR FAVORITE LOOK!\"), looks);\n};\n\nexport default Home;","map":{"version":3,"sources":["C:\\Users\\fverz\\Documents\\myProjects\\vlust-hosting\\pages\\index.js"],"names":["React","useState","useEffect","require","Layout","fetch","Link","InfiniteScroll","Spinner","Look","lazy","Home","json","setJson","loading","setLoading","outputed","setOutputed","hasMore","setHasMore","limit","setLimit","fetchData","then","response","data","dataJson","shuffled","map","a","sort","Math","random","value","b","storesInfo","length","i","push","name","email","url","imageUrl","outputData","catch","err","console","log","slice","oldLimit","partialArr","concat","looks","position","verticalAlign","textAlign","width","marginTop","cursor","textDecoration","display","look"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\n\r\nrequire('intersection-observer');\r\nimport './style.css'\r\nimport Layout from '../src/components/Layout/Layout'\r\nimport fetch from 'isomorphic-fetch'\r\nimport Link from 'next/link'\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nimport Spinner from '../src/components/UI/Spinner/Spinner'\r\n\r\nconst Look = React.lazy(() => import('../src/components/Looks/Look'))\r\n\r\n\r\nconst Home = () => {\r\n  const [json, setJson] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [outputed, setOutputed] = useState([])\r\n  const [hasMore, setHasMore] = useState(true)\r\n  const [limit, setLimit] = useState(6)\r\n\r\n  useEffect(() => { \r\n        const fetchData = () => { \r\n        fetch('https://the-v-lust.firebaseio.com/looks.json')\r\n        .then(response => {\r\n          return response.json()\r\n        })\r\n        .then(data => { \r\n          if(data === null) {\r\n            setLoading(false)\r\n          }\r\n          if (data){\r\n          let dataJson = Object.entries(data)\r\n          let shuffled = dataJson    \r\n          .map((a) => ({sort: Math.random(), value: a}))\r\n          .sort((a, b) => a.sort - b.sort)\r\n          .map((a) => a.value)\r\n          let storesInfo = []\r\n          if(shuffled.length !== 0 || shuffled !== null) {\r\n            for (let i = 0; i < shuffled.length; i++) {\r\n              storesInfo.push([shuffled[i][0],shuffled[i][1].name, shuffled[i][1].email, shuffled[i][1].url, shuffled[i][1].imageUrl])\r\n            }\r\n          }\r\n          setJson(storesInfo)\r\n          outputData(storesInfo)\r\n          setLoading(false)\r\n        }})\r\n        .catch(err => {\r\n          console.log(err)\r\n          setLoading(false)\r\n        })\r\n    }\r\n    fetchData()\r\n\r\n  },[])\r\n\r\n    let data = []\r\n\r\n\r\n    const outputData = (storesInfo) => {\r\n      if (storesInfo.length > 0) {\r\n        if (outputed.length === 0) {\r\n          data = storesInfo.slice(0 , limit)\r\n          setOutputed(data)\r\n          \r\n          if (data.length >= storesInfo.length) {\r\n            setHasMore(false)\r\n          }\r\n        }\r\n      } \r\n    }\r\n\r\n    const fetchData = () => {\r\n        let oldLimit = limit\r\n        let partialArr = json.slice(oldLimit, limit+3)\r\n        setOutputed(outputed.concat(partialArr))\r\n        setLimit(limit+3)\r\n        if (json.length <= outputed.length + partialArr.length) {\r\n          \r\n          setHasMore(false)\r\n        }\r\n    }\r\n\r\n    console.log('hasMOre?:', hasMore)\r\n\r\n    let looks =  (    \r\n      <Spinner />\r\n    )\r\n\r\n    if(loading === false && json.length === 0) {\r\n      looks = (      \r\n        <div style={{position: \"relative\", verticalAlign: \"middle\"}} >\r\n        <p style={{textAlign: \"center\", width: '100%', marginTop: \"30%\"}}>NO LOOKS SUBMITTED YET! CHECK LATER OR </p>\r\n        <Link href='/submit'><a style={{cursor: 'pointer', textDecoration: 'underline', textAlign: 'center', display:'block'}}>SUBMIT YOUR LOOK!</a></Link>\r\n        </div>\r\n      )\r\n    }\r\n    if (json.length > 0) {\r\n      looks = (\r\n        <div>\r\n      <InfiniteScroll\r\n      dataLength={outputed.length}\r\n      next={fetchData}\r\n      hasMore={hasMore}\r\n      loader={<Spinner />}\r\n      endMessage={\r\n        <p style={{ textAlign: \"center\" }}>\r\n          <b>YOU HAVE SEEN IT ALL! <br/> IT'S TIME TO CHOOSE!</b>\r\n        </p>\r\n      }>\r\n        <div className=\"Looks\">\r\n        {outputed.map(look => {\r\n          return (<Look \r\n            key={look[0]}\r\n            id={look[0]}\r\n            name={look[1]}\r\n            email={look[2]}\r\n            url={look[3]}\r\n            image={look[4]}\r\n          />)\r\n        } )} \r\n        </div>     \r\n        </InfiniteScroll>\r\n        </div>\r\n        )\r\n    }\r\n\r\n  return(\r\n    <Layout>\r\n      <p className=\"intro\">VOTE FOR YOUR FAVORITE LOOK!</p>\r\n         {looks}\r\n    </Layout>\r\n\r\n)}\r\n\r\nexport default Home"]},"metadata":{},"sourceType":"module"}