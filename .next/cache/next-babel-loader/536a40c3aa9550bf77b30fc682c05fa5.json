{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Object$entries from \"@babel/runtime-corejs2/core-js/object/entries\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Layout from '../../src/components/Layout/Layout';\nimport Spinner from '../../src/components/UI/Spinner/Spinner';\nvar WinnerLook = React.lazy(function () {\n  return import('../../src/components/WinnerLook/WinnerLook');\n});\n\nvar Results = function Results() {\n  var _useState = useState([]),\n      looks = _useState[0],\n      setLooks = _useState[1];\n\n  var _useState2 = useState([]),\n      votes = _useState2[0],\n      setVotes = _useState2[1];\n\n  useEffect(function () {\n    function fetchData() {\n      return _fetchData.apply(this, arguments);\n    }\n\n    function _fetchData() {\n      _fetchData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var looksData, looksJson, votesData, votesJson;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch(\"https://the-v-lust.firebaseio.com/looks.json\");\n\n              case 2:\n                looksData = _context.sent;\n                _context.next = 5;\n                return looksData.json();\n\n              case 5:\n                looksJson = _context.sent;\n                looksJson ? setLooks(_Object$entries(looksJson)) : setVotes(null);\n                _context.next = 9;\n                return fetch(\"https://the-v-lust.firebaseio.com/votes.json\");\n\n              case 9:\n                votesData = _context.sent;\n                _context.next = 12;\n                return votesData.json();\n\n              case 12:\n                votesJson = _context.sent;\n                votesJson ? setVotes(_Object$entries(votesJson)) : setVotes(null);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchData.apply(this, arguments);\n    }\n\n    fetchData();\n  }, []);\n  var looksArr = [];\n\n  if (looks !== undefined && looks !== null && votes !== undefined && votes !== null) {\n    for (var i = 0; i < looks.length; i++) {\n      for (var j = 0; j < votes.length; j++) {\n        if (votes[j][0] === looks[i][0]) {\n          looksArr.push([votes[j][1].votes, votes[j][0], looks[i][1].url, looks[i][1].imageUrl, looks[i][1].name]);\n        }\n      }\n    }\n  }\n\n  looksArr = looksArr.sort(function (a, b) {\n    var retVal = 0;\n    if (a[0] != b[0]) retVal = a[0] > b[0] ? 1 : -1;else if (a[1] != b[1]) retVal = a[1] > b[1] ? 1 : -1;else if (a[2] != b[2]) retVal = a[2] > b[2] ? 1 : -1;\n    return retVal;\n  });\n  looksArr = looksArr.reverse().slice(0, 10);\n\n  var winner = __jsx(\"div\", null, __jsx(\"p\", {\n    className: \"WinnerLookTheme\"\n  }, \"MOST VOTED LOOKS\"), looksArr.map(function (look) {\n    return __jsx(WinnerLook, {\n      key: look[1],\n      id: look[1],\n      url: look[2],\n      imageUrl: look[3],\n      votes: look[0],\n      name: look[4]\n    });\n  }));\n\n  if (votes === null) {\n    winner = __jsx(\"div\", {\n      style: {\n        position: \"relative\",\n        verticalAlign: \"middle\"\n      }\n    }, __jsx(\"p\", {\n      style: {\n        textAlign: \"center\",\n        width: '100%',\n        marginTop: \"30%\"\n      }\n    }, \"NO LOOKS VOTED YET! \"), __jsx(\"a\", {\n      href: '/',\n      style: {\n        cursor: 'pointer',\n        textDecoration: 'underline',\n        textAlign: 'center',\n        display: 'block'\n      }\n    }, \"VOTE FOR YOUR FAVORITE LOOK!\"));\n  }\n\n  if (votes !== null && looksArr.length < 1) {\n    winner = __jsx(\"div\", null, __jsx(Spinner, null));\n  }\n\n  return __jsx(Layout, null, winner);\n};\n\nexport default Results;","map":null,"metadata":{},"sourceType":"module"}